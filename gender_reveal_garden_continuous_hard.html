<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üå∏ Gender Reveal - Garden Continuous Confetti Hard</title>
<style>
:root{
  --pink:#ff9acb;
  --gold:#ffd27f;
  --leaf:#d4eac3;
  --cream:#fffaf0;
}
body{
  margin:0;
  height:100vh;
  background:radial-gradient(circle at 60% 40%, var(--cream) 0%, var(--leaf) 70%, #c6e2b3 100%);
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:"Pretendard",sans-serif;
}
#scene{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}
#circle{
  position:absolute;
  width:300px;height:300px;
  border-radius:50%;
  border:6px solid rgba(80,80,80,0.6);
  box-shadow:inset 0 0 15px rgba(0,0,0,0.2);
  transition:transform 0.05s linear;
}
#targetRing{
  position:absolute;
  width:150px;height:150px;
  border-radius:50%;
  border:4px dashed var(--pink);
  opacity:0.7;
}
#balloon{
  width:180px;height:210px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #444 0%, #111 75%);
  position:absolute;
  top:15%;
  left:50%;
  transform:translateX(-50%);
  box-shadow:0 0 40px rgba(0,0,0,0.7);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
#balloon span{
  font-size:1.5em;
  font-weight:700;
  line-height:1em;
}
#balloon .boy{color:#6ec9ff; text-shadow:0 0 8px rgba(110,201,255,0.6);}
#balloon .girl{color:var(--pink); text-shadow:0 0 8px rgba(255,126,185,0.6);}
#arrow{
  position:absolute;
  bottom:60px;
  left:50%;
  width:10px;height:80px;
  background:linear-gradient(180deg,#f8f8f8 0%,#bbb 40%,#555 100%);
  transform:translateX(-50%);
  border-radius:4px;
  box-shadow:0 0 10px rgba(255,255,255,0.5);
}
#arrow::after{
  content:"";
  position:absolute;
  top:-20px;left:1px;
  width:8px;height:20px;
  background:linear-gradient(180deg,#ccc,#999);
  clip-path:polygon(50% 0,100% 100%,0 100%);
}
#result{
  position:absolute;
  top:calc(15% + 100px);
  left:50%;
  transform:translate(-50%,-50%) scale(0.5);
  font-size:1.5em;
  color:var(--pink);
  text-shadow:0 0 15px rgba(255,150,200,0.9);
  opacity:0;
}
@keyframes popText{
  0%{transform:translate(-50%,-50%) scale(0.5);opacity:0;}
  60%{transform:translate(-50%,-50%) scale(1.3);opacity:1;}
  100%{transform:translate(-50%,-50%) scale(1);opacity:1;}
}
#miss{
  position:absolute;
  top:40%;left:50%;
  transform:translateX(-50%);
  font-size:1.8em;
  color:#666;
  display:none;
}
#holdBtn{
  position:absolute;
  bottom:60px;
  left:50%;
  transform:translateX(-50%);
  background:linear-gradient(90deg,#6ec9ff,var(--pink));
  color:white;
  font-size:1.1em;
  padding:16px 32px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}
.confetti{
  position:fixed;
  width:10px;height:10px;
  border-radius:50%;
  animation:burst 2s ease-out forwards;
}
@keyframes burst{
  0%{opacity:1;transform:translate(0,0) scale(1);}
  100%{opacity:0;transform:translate(var(--x),var(--y)) scale(0.8) rotate(720deg);}
}
</style>
</head>
<body>
<div id="scene">
  <div id="balloon">
    <span class="boy">Boy?</span>
    <span class="girl">Girl?</span>
  </div>
  <div id="circle"></div>
  <div id="targetRing"></div>
  <div id="arrow"></div>
  <div id="result">üë∂ Îî∏Ïù¥ÏóêÏöî! üíï</div>
  <div id="miss">Miss!</div>
</div>
<button id="holdBtn">Í∏∏Í≤å ÎàÑÎ•¥ÏÑ∏Ïöî</button>

<script>
const circle=document.getElementById('circle');
const balloon=document.getElementById('balloon');
const result=document.getElementById('result');
const miss=document.getElementById('miss');
const arrow=document.getElementById('arrow');
const btn=document.getElementById('holdBtn');

let holding=false;
let scale=1.0;
let interval;
let shrinkSpeed=0.018; // ÌïòÎìú Î™®Îìú - Ìõ®Ïî¨ Îπ†Î¶Ñ
let targetScale=0.5;
let margin=0.02; // ÌÉÄÏù¥Î∞ç ÎßàÏßÑ Ï¢ÅÍ≤å
let fireworksInterval;

function start(){
  if(holding)return;
  holding=true;
  scale=1.0;
  circle.style.transform=`scale(${scale})`;
  interval=setInterval(()=>{
    scale-=shrinkSpeed;
    if(scale<0.1){
      scale=0.1;
      stop();
    }
    circle.style.transform=`scale(${scale})`;
  },16);
}

function stop(){
  if(!holding)return;
  holding=false;
  clearInterval(interval);
  shootArrow(scale);
}

function shootArrow(scaleAtRelease){
  const startY=window.innerHeight-140;
  const endY=100;
  const duration=450;
  const startTime=performance.now();
  function anim(t){
    const elapsed=t-startTime;
    const progress=Math.min(elapsed/duration,1);
    const y=startY-(startY-endY)*progress;
    arrow.style.top=y+"px";
    if(progress<1){
      requestAnimationFrame(anim);
    }else{
      arrow.style.top="";
      arrow.style.bottom="60px";
      checkHit(scaleAtRelease);
    }
  }
  requestAnimationFrame(anim);
}

function checkHit(scaleAtRelease){
  const diff=Math.abs(scaleAtRelease-targetScale);
  if(diff<margin){
    explode();
  }else{
    fail();
  }
}

function explode(){
  const rect=balloon.getBoundingClientRect();
  const centerX=rect.left+rect.width/2;
  const centerY=rect.top+rect.height/2;
  balloon.style.transition="0.25s ease";
  balloon.style.transform="scale(0)";
  balloon.style.boxShadow="0 0 120px rgba(255,180,220,0.9)";
  setTimeout(()=>{
    balloon.style.display="none";
    result.style.display="block";
    result.style.animation="popText 0.5s ease forwards";
    confetti(centerX,centerY);
    fireworksInterval=setInterval(()=>screenConfetti(),600);
  },250);
}

function fail(){
  miss.style.display="block";
  miss.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:900});
  setTimeout(()=>{miss.style.display="none";},900);
}

btn.addEventListener('mousedown',start);
btn.addEventListener('mouseup',stop);
btn.addEventListener('touchstart',e=>{e.preventDefault();start();});
btn.addEventListener('touchend',e=>{e.preventDefault();stop();});

function confetti(x,y){
  for(let i=0;i<120;i++){
    const c=document.createElement('div');
    c.className='confetti';
    c.style.left=x+'px';
    c.style.top=y+'px';
    const angle=Math.random()*2*Math.PI;
    const dist=100+Math.random()*200;
    c.style.setProperty('--x',`${Math.cos(angle)*dist}px`);
    c.style.setProperty('--y',`${Math.sin(angle)*dist}px`);
    const colors=['#ff9acb','#ffe4f0','#ffd27f','#fff3b0'];
    c.style.background=colors[Math.floor(Math.random()*colors.length)];
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),2000);
  }
}

function screenConfetti(){
  const x=Math.random()*window.innerWidth;
  const y=Math.random()*window.innerHeight*0.6;
  confetti(x,y);
}
</script>
</body>
</html>